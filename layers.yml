- name: power
  layers:
    - name: power_line
      query: "SELECT geometry, tunnel, location, frequency, type, name, line,
                      ref, char_length(ref) AS ref_len,
                      convert_voltage(voltage) / 1000 AS voltage, operator
              FROM osm_power_lines"
      geometry: linestring
    - name: power_tower
      query: "SELECT geometry, type, name, ref, operator
              FROM osm_power_tower"
      geometry: point
    - name: substation
      query: "SELECT geometry, name, convert_voltage(voltage) / 1000 AS voltage, substation, operator
              FROM substation"
      geometry: linestring
    - name: substation_point
      query: "SELECT ST_Centroid(geometry) AS geometry, name, convert_voltage(voltage) / 1000 AS voltage,
              substation
              FROM substation"
      geometry: point
    - name: power_plant
      query: "SELECT geometry, name, operator, convert_power(output)/1e6 AS output, source
              FROM power_plant"
      geometry: linestring
    - name: power_plant_point
      query: "SELECT ST_Centroid(geometry) AS geometry, name, convert_power(output)/1e6 AS output, source
              FROM power_plant"
      geometry: point
    - name: power_generator
      query: "SELECT geometry, name, operator, convert_power(output)/1e3 AS output, source, type, ref
              FROM osm_power_generator"
      geometry: geometry
- name: telecoms
  layers:
    - name: communication_line
      query: "SELECT geometry, operator, name, location FROM osm_comms_cable"
      geometry: linestring
    - name: data_center
      query: "SELECT geometry, operator, name, ref FROM osm_data_center"
      geometry: linestring
    - name: mast
      query: "SELECT geometry, operator, name, ref FROM osm_mast WHERE type = 'communications_tower' OR tower_type IN ('communication', 'radio', 'antenna')"
      geometry: point
- name: petroleum
  layers:
    - name: pipeline
      query: "SELECT geometry, operator, name, location FROM osm_pipeline WHERE substance IN ('natural_gas', 'gas', 'oil', 'fuel', 'cng') OR type IN ('natural_gas', 'gas', 'oil', 'fuel', 'cng')"
      geometry: linestring
    - name: well
      query: "SELECT geometry, operator, name FROM osm_petroleum_well"
      geometry: point
- name: water
  layers:
    - name: pipeline
      query: "SELECT geometry, operator, name, location FROM osm_pipeline WHERE substance = 'water' OR type = 'water'"
      geometry: linestring
- name: microwave_hft
  layers:
    - name: microwave_link
      query: "SELECT geometry, name AS operator, ref, type,
              round(ST_Length(ST_Transform(geometry, 4326)::geography)/1000) AS length
              FROM microwave_link, microwave_operator
              WHERE microwave_operator.id = microwave_link.operator"
      geometry: linestring
